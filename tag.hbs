{{!< default}}

{{! The comment above "< default" means - insert everything in this file into
    the {body} of the default.hbs template, which contains our header/footer. }}

<header>
  <link rel="stylesheet" href="{{asset "bower_components/DataTables/media/css/jquery.dataTables.min.css"}}">
  <link rel="stylesheet" href="{{asset "bower_components/datatables-responsive/css/dataTables.responsive.css"}}">

  <script type="text/javascript" src="{{asset "bower_components/DataTables/media/js/jquery.dataTables.min.js"}}"></script>
  <script type="text/javascript" src="{{asset "bower_components/datatables-responsive/js/dataTables.responsive.js"}}"></script>

  <script type="text/javascript" src="{{asset "js/datatables-initialize.js"}}"></script>
</header>

{{! The main content area on the homepage }}
<main class="content tag-content" role="main">
{{!-- <h5 id="homeDesc">All Ghost Themes is a comprehensive website that lists every single Ghost theme that has been created. All Ghost Themes tries to ease the search for a theme by putting them all in one place, and showing live demos of each theme to make your search as fast and as easy as possible.</h5><hr> --}}
<div id="homeContent">
   <table id="indexTable" class="display responsive" width="100%">
      <thead>
        <tr>
          <th class="tableNameHeader tdCenter">Theme Name</th>
          <th class="tableDemoHeader tdCenter">Demo</th>
          <th class="tablePriceHeader tdCenter min-tablet-l">Price</th>
          <th class="tableDescHeader tdCenter min-tablet-l">Description</th>
          <th class="tableColumnHeader tdCenter min-tablet-l">Columns</th>
          <th class="max-tablet-l"></th>
        </tr>
      </thead>
      <tbody>
    {{! Each post will be output using this markup }}
    {{#foreach posts}}
        <tr class="tableRows">
            <td class="tableTitle"><a href="{{url}}">{{title}}</a>
              <input type="hidden" name="tags" value="{{#foreach tags}}{{name}},{{/foreach}}">
            </td>
            <td class="tableImage"><p>Load Image</p></td>
            <td class="tdCenter price"></td>
            <td id={{title}} class="indexDescription">{{excerpt characters="500"}}</td>
               <script>
                var desc = $('.indexDescription').text();
                var descSplit = desc.split("-", 10);
                var descSlice = "";
                for (var i=0;i<descSplit.length;i++)
                  {
                    if(i>=2) {
                      descSlice = descSlice+descSplit[i];
                    }
                  };
                $("td.indexDescription").replaceWith("<td class=\"indexDescriptionSlice\">"+descSlice+"</td>");
                </script>
            <td class="tdCenter columns"></td>
            <td></td>
        </tr>
        {{/foreach}}
        <script>
          $(function(){
  
            $("tbody tr").each(function(){
              var tags = $(this).find("input[name='tags']").val();
              tags = tags.replace(/[A-Za-z-]/g, "");
              var tags_array = tags.split(",");
              tags_array = tags_array.filter(String);
              tags_array.sort();
              
              $(this).find(".price").html(tags_array[0]);
              $(this).find(".columns").html(tags_array[1]);
            });
            
          });
        </script>
    </tbody>
    </table>
    <script>
      $(document).ready(function() {
        datatableInitialize();
      });
    </script>
    </div>
</main>